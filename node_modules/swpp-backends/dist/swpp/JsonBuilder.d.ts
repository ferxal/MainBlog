import { CompilationData } from './SwCompiler';
/**
 * JSON 构建器，用于构建在前端使用的版本更新文件。
 */
export declare class JsonBuilder {
    private compilation;
    private urls;
    private map;
    /**
     * @param compilation 编译期属性
     * @param urls 网站中所有可能被缓存的 URL
     * @param map 新旧文件差异的 map，key 为 URL，value 为新的 md5 值
     */
    constructor(compilation: CompilationData, urls: Set<string>, map?: Map<string, string>);
    update(key: string, value: string): void;
    /** 将 Builder 序列化为 JSON */
    serialize(): string;
    /**
     * 构建在前端使用的版本信息文件
     */
    buildJson(): Promise<UpdateJson>;
    private zipJson;
    private limitJson;
}
export interface TrackerHeaderDiff {
    oldValue: any;
    newValue: any;
}
export interface UpdateJson {
    global: number;
    info: {
        version: number;
        change?: UpdateChangeExp[];
    }[];
}
export interface UpdateChangeExp {
    flag: 'html' | 'suf' | 'pre' | 'str' | 'reg';
    value?: string | string[];
}
